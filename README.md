# 2020-7-19
## 2012年电设题目——激光打靶

### 简单描述
设计一个能够控制激光枪击发、自动报靶及自动瞄准等功能的电子系统。该系统由激光枪及瞄准机构、胸环靶、弹着点检测电路组成.<br/>
(1).用激光笔改装激光枪，激光枪可受电路控制发射激光束，激光束照射于胸环靶上弹着点的光斑直径＜5mm；激光枪与胸环靶间距离为3m。<br/>
(2).激光枪固定在一机构上，可通过键盘控制激光枪的弹着点（用键盘设置激光束在靶纸上上下、左右移动一定距离）<br/>
(3).制作弹着点检测电路，通过摄像头识别激光枪投射在胸环靶上的弹着点光斑，并显示弹着点的环数与方位信息。其中环数包括：10、  9、8、7、6、5、脱靶；方   位信息是指弹着点与10环区域的相对位置，包括：中心、正上、正下、正左、正右、左上、左下、右上、右下。<br/>
**拓展**
(4).在图形点阵显示器上显示胸环靶的相应图形，并闪烁显示弹着点.<br/>
(5).自动控制激光枪，在15秒内将激光束光斑从胸环靶上的指定位置迅速瞄准并击中靶心（即10环区域）.<br/>
(6).可根据任意设定的环数，控制激光枪瞄准击中胸环靶上相应位置.<br/>

### 方案
整体方案：<br/>
采用stm32进行舵机的控制以及LCD打靶信息的显示、树莓派跑OPENCV进行视觉识别；两者直接的通信采用串口通信<br/>
**识别方案**：<br/>
1.识别圆的方案
一、最开始的时候，轩哥想的自上而下扫描找到找到第一个黑色像素点，然后自下而上找到第二个像素点，根据这两个坐标计算圆心坐标，但是这样做效果太差。<br/>
二、后面，采用了新的方案：直接使用霍夫变换来识别圆，找出最大的圆从而定出圆心；<br/>
2.识别激光点的方案
一、识别最亮点，直接找出灰度最大的一点；<br/>
二、识别最红的点：1.将整个图像转化到HSV域-->2.根据红色的阈值构建掩膜-->3.然后先腐蚀在膨胀进行开运算，去除噪点-->4.找出最大轮廓-->5.找出最大轮廓的外接圆的圆心就是光点的位置.
**控制方案**
使用舵机进行光点的控制,根据树莓派传过来的数据进行负反馈控制.
